(this.webpackJsonpagileful=this.webpackJsonpagileful||[]).push([[3],{424:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));var n=a(108),r=a(28),c=a(0),o=a.n(c),s=a(425),i=a.n(s),u=a(203);function l(){var e=Object(n.a)(["\n  .avatar {\n    width: "," !important;\n    height: unset !important;\n    max-width: unset;\n  }\n"]);return l=function(){return e},e}function d(e){var t=Object(c.useState)(!e.user),a=Object(r.a)(t,2),n=a[0],s=a[1],l=Object(c.useState)(e.user),d=Object(r.a)(l,2),m=d[0],f=d[1],p=e.size?parseInt(e.size):150;return Object(c.useEffect)((function(){!m&&n&&Object(u.a)().then((function(e){s(!1),f(e)}))}),[n,m]),m?o.a.createElement(b,{size:p},o.a.createElement(i.a,{email:m.email,size:p,className:"avatar border-gray"})):o.a.createElement("span",null)}var b=a(109).a.span(l(),(function(e){return e.size}))},438:function(e,t,a){"use strict";var n=a(108),r=a(441),c=a(10),o=a.n(c),s=a(409),i=a(28),u=a(0),l=a.n(u),d=a(65),b=a(18),m=a(23);function f(e,t){var a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(Object(b.a)({method:"GET",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/columns")}));case 2:return a=n.sent,n.abrupt("return",Object(m.a)(a.data));case 4:case"end":return n.stop()}}))}function p(e,t,a){var n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,o.a.awrap(Object(b.a)({method:"POST",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/columns"),data:Object(m.b)(a,"columns")}));case 3:n=r.sent,r.next=9;break;case 6:throw r.prev=6,r.t0=r.catch(0),new Error(r.t0.response.data.errors[0].detail);case 9:return r.abrupt("return",Object(m.a)(n.data));case 10:case"end":return r.stop()}}),null,null,[[0,6]])}function v(e,t,a,n){var r;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,o.a.awrap(Object(b.a)({method:"PATCH",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/columns/").concat(a),data:Object(m.b)(n,"columns")}));case 3:r=c.sent,c.next=9;break;case 6:throw c.prev=6,c.t0=c.catch(0),new Error(c.t0.response.data.errors[0].detail);case 9:return c.abrupt("return",Object(m.a)(r.data));case 10:case"end":return c.stop()}}),null,null,[[0,6]])}function j(e,t,a){return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,o.a.awrap(Object(b.a)({method:"DELETE",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/columns/").concat(a)}));case 3:n.next=8;break;case 5:throw n.prev=5,n.t0=n.catch(0),new Error(n.t0.response.data.errors[0].detail);case 8:case"end":return n.stop()}}),null,null,[[0,5]])}var O=a(412),h=a.n(O),E=a(78),g=a(110),k=a(38),x=a(400),y=a(401),w=a(109);function C(){var e=Object(n.a)(["\n  &.mode-edit {\n    outline: 1px solid #51cbce;\n  }\n"]);return C=function(){return e},e}function I(){var e=Object(n.a)(["\n  .edit-button {\n    display: none;\n  }\n\n  :hover {\n    .edit-button {\n      display: inline;\n    }\n  }\n"]);return I=function(){return e},e}function S(e){var t=Object(u.useState)("view"),a=Object(i.a)(t,2),n=a[0],r=a[1],c=Object(u.useState)(e.text),o=Object(i.a)(c,2),s=o[0],d=o[1],b=Object(u.useRef)(),m=Object(u.useRef)();Object(u.useEffect)((function(){d(e.text)}),[e.text]);var f=Object(u.useCallback)(h()((function(t){e.onChange(t)}),500),[e.onChange]);return l.a.createElement(T,{className:"mode-".concat(n)},l.a.createElement(N,{ref:b,onClick:function(){"view"===n&&function(e,t){var a=window.getComputedStyle(e);Array.from(a).forEach((function(e){return t.style.setProperty(e,a.getPropertyValue(e),a.getPropertyPriority(e))}))}(b.current,m.current),r("view"===n?"edit":"view"),"view"===n&&m.current.focus()},style:{display:"view"===n?"block":"none"}},s,l.a.createElement("span",{className:"edit-button"},"\xa0",l.a.createElement(x.a,{icon:y.f}))),l.a.createElement("input",{ref:m,type:"text",value:s,onChange:function(e){return d(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(r("view"),f(s))},onBlur:function(t){r("view"),s!==e.text&&f(s)},style:{display:"edit"===n?"block":"none"}}))}var N=w.a.div(I()),T=w.a.div(C()),P=a(619),z=a(605),A=a(606),R=a(111);function M(){var e=Object(n.a)(["\n  textarea {\n    padding: 0.5em !important;\n    max-height: 1000px !important;\n  }\n"]);return M=function(){return e},e}function D(e){var t=Object(u.useState)(e.value),a=Object(i.a)(t,2),n=a[0],r=a[1],c=Object(u.useRef)();Object(u.useEffect)((function(){r(e.value)}),[e.value]),e.innerRef&&(c=e.innerRef),Object(u.useEffect)((function(){c.current.style.height="0px";var e=c.current.scrollHeight+2;e<44&&(e=44),c.current.style.height=e+"px"}),[n]);var o=Object(u.useCallback)((function(t){e.onChange(t),r(t)}),[e]);return l.a.createElement(F,null,l.a.createElement("textarea",{ref:c,className:"form-control",onChange:function(e){return o(e.target.value)},value:n,onFocus:e.onFocus,onBlur:e.onBlur}))}var F=w.a.div(M()),H=a(469),K=a.n(H);function L(){var e=Object(n.a)(["\n  h1 {\n    font-size: 2em !important;\n  }\n\n  h2 {\n    font-size: 1.5em !important;\n  }\n\n  h3, h4, h5, h6 {\n    font-size: 1em !important;\n    font-weight: bold !important;\n  }\n\n  p:last-child {\n    margin-bottom: 0;\n  }\n"]);return L=function(){return e},e}function B(e){return l.a.createElement(G,null,l.a.createElement(K.a,{source:e.value}))}var G=w.a.div(L());function U(e){var t=e.task,a=Object(u.useState)(t.description),n=Object(i.a)(a,2),r=n[0],c=n[1],o=Object(u.useState)(!1),s=Object(i.a)(o,2),d=s[0],b=s[1],m=Object(k.i)().projectId,f=Object(u.useRef)();Object(u.useEffect)((function(){c(t.description)}),[t.description]),Object(u.useEffect)((function(){d&&(console.log("focus"),f.current.focus())}),[d]);var p=Object(u.useCallback)((function(){b(!0)}),[]),v=Object(u.useCallback)((function(e){c(e)}),[]),j=Object(u.useCallback)((function(e){b(!1),Object(E.c)(m,t.board.id,t.id,{description:r})}),[r,m,t.board.id,t.id]);return l.a.createElement("div",null,l.a.createElement("h6",{className:"mt-3"},l.a.createElement(x.a,{icon:y.a})," Description \xa0",!d&&l.a.createElement("button",{className:"btn btn-primary btn-sm mt-0 mb-0",onClick:p},"Edit")),l.a.createElement("div",{style:{display:d?"block":"none"}},l.a.createElement(D,{innerRef:f,onChange:function(e){return v(e)},value:r}),l.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:j},"Save")),l.a.createElement("div",{style:{display:d?"none":"block"}},l.a.createElement(B,{value:r})))}var $=a(181),W=a(387),J=a(388),_=a(389),q=a(190);function V(e,t,a){var n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.awrap(Object(b.a)({method:"GET",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/tasks/").concat(a,"/check-items")}));case 2:return n=r.sent,r.abrupt("return",Object(m.a)(n.data));case 4:case"end":return r.stop()}}))}function Y(e,t,a,n){var r;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,o.a.awrap(Object(b.a)({method:"POST",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/tasks/").concat(a,"/check-items"),data:Object(m.b)(n,"check-items")}));case 3:r=c.sent,c.next=9;break;case 6:throw c.prev=6,c.t0=c.catch(0),new Error(c.t0.response.data.errors[0].detail);case 9:return c.abrupt("return",Object(m.a)(r.data));case 10:case"end":return c.stop()}}),null,null,[[0,6]])}function Z(e,t,a,n,r){var c;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,o.a.awrap(Object(b.a)({method:"PATCH",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/tasks/").concat(a,"/check-items/").concat(n),data:Object(m.b)(r,"tasks")}));case 3:c=s.sent,s.next=9;break;case 6:throw s.prev=6,s.t0=s.catch(0),new Error(s.t0.response.data.errors[0].detail);case 9:return s.abrupt("return",Object(m.a)(c.data));case 10:case"end":return s.stop()}}),null,null,[[0,6]])}var Q=a(396),X=a(618),ee=a(549);function te(){var e=Object(n.a)(["\n  font-size: 1.5em;\n  vertical-align: middle;\n  cursor: pointer;\n\n  .inactive {\n    color: #aaa;\n  }\n\n  .active {\n    color: #51cbce;\n  }\n"]);return te=function(){return e},e}function ae(e){var t=Object(u.useState)(e.checked),a=Object(i.a)(t,2),n=a[0],r=a[1];function c(){var t=!n;r(t),e.onChange&&e.onChange(t)}return Object(u.useEffect)((function(){r(e.checked)}),[e.checked]),n?l.a.createElement(ne,{onClick:c},l.a.createElement(x.a,{className:"active",icon:y.b})):l.a.createElement(ne,{onClick:c},l.a.createElement(x.a,{className:"inactive",icon:ee.a}))}var ne=w.a.span(te()),re=a(449),ce=a.n(re),oe=a(113);function se(){var e=Object(n.a)(["\n  .action {\n    display: none;\n  }\n\n  &:hover .action {\n    display: inline;\n    cursor: pointer;\n  }\n"]);return se=function(){return e},e}var ie=Object(u.createContext)(null);function ue(e){var t=e.task,a=Object(u.useState)([]),n=Object(i.a)(a,2),r=n[0],c=n[1],s=Object(k.i)().projectId,d=Math.max.apply(Math,[0].concat(Object($.a)(r.map((function(e){return e.order+1}))))),b=Object(u.useContext)(R.a),m=Object(u.useCallback)((function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=c,e.next=3,o.a.awrap(V(s,t.board.id,t.id));case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}))}),[s,t.board.id,t.id]),f=Object(u.useCallback)(h()(m,500),[m]);Object(u.useEffect)((function(){m()}),[m]),Object(u.useEffect)((function(){var e=b.ws.onPattern("task-".concat(t.id,"/check-item-*"),(function(){f()}));return function(){e()}}),[b.ws,m,f,t.id]);var p=Object(u.useCallback)((function(e,t){var a=r[e];c(ce()(r,{$splice:[[e,1],[t,0,a]]}))}),[r]),v=Object(u.useCallback)(h()((function(){var e=[];for(var a in r){var n=r[a],c=parseInt(a);n.order!==c&&e.push({id:n.id,order:c})}e.length>0&&function(e){var a,n,r,c,i,u,l;o.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:for(a=[],n=!0,r=!1,c=void 0,d.prev=4,i=e[Symbol.iterator]();!(n=(u=i.next()).done);n=!0)l=u.value,a.push(Z(s,t.board.id,t.id,l.id,{order:l.order}));d.next=12;break;case 8:d.prev=8,d.t0=d.catch(4),r=!0,c=d.t0;case 12:d.prev=12,d.prev=13,n||null==i.return||i.return();case 15:if(d.prev=15,!r){d.next=18;break}throw c;case 18:return d.finish(15);case 19:return d.finish(12);case 20:return d.next=22,o.a.awrap(Promise.all(a));case 22:case"end":return d.stop()}}),null,null,[[4,8,12,20],[13,,15,19]])}(e)}),500),[t,r]);return l.a.createElement(ie.Provider,{value:{moveItem:p,updateItemOrders:v}},l.a.createElement("h6",{className:"mt-3"},l.a.createElement(x.a,{icon:y.g})," Checklist"),l.a.createElement("div",null,r.map((function(e,a){return l.a.createElement(de,{key:e.id,task:t,index:a,checkItem:e})}))),l.a.createElement(le,{task:t,nextOrder:d}))}function le(e){var t=e.task,a=e.nextOrder,n=Object(u.useState)(""),r=Object(i.a)(n,2),c=r[0],s=r[1],d=Object(u.useState)(!1),b=Object(i.a)(d,2),m=b[0],f=b[1],p=Object(u.useState)(null),v=Object(i.a)(p,2),j=v[0],O=v[1],h=Object(k.i)().projectId,E=Object(u.useCallback)((function(e){return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),f(!0),n.prev=2,n.next=5,o.a.awrap(Y(h,t.board.id,t.id,{text:c,order:a,checked:!1}));case 5:s(""),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),O(n.t0.message);case 11:return n.prev=11,f(!1),n.finish(11);case 14:case"end":return n.stop()}}),null,null,[[2,8,11,14]])}),[a,h,t.board,t.id,c]);return l.a.createElement("form",{onSubmit:E},l.a.createElement(W.a,null,l.a.createElement(J.a,{value:c,onChange:function(e){return s(e.target.value)}}),l.a.createElement(_.a,{addonType:"append"},l.a.createElement(q.a,{color:"primary",disabled:m},m?"Wait":"Add"))),j&&l.a.createElement("div",{className:"alert alert-danger"},j))}function de(e){var t=e.task,a=e.checkItem,n=e.index,r=Object(k.i)().projectId,c=Object(u.useContext)(ie),d=c.moveItem,m=c.updateItemOrders,f=Object(u.useState)(!1),p=Object(i.a)(f,2),v=p[0],j=p[1],O=Object(u.useState)(null),h=Object(i.a)(O,2),E=h[0],g=h[1],w=Object(u.useState)(a.text),C=Object(i.a)(w,2),I=C[0],S=C[1],N=Object(u.useState)(!1),T=Object(i.a)(N,2),P=T[0],z=T[1];Object(u.useEffect)((function(){S(a.text)}),[a.text]);var A=Object(u.useRef)(null);var R=Object(Q.a)({accept:oe.a.CHECK_ITEM,hover:function(e,t){if(A.current){var a=e.index,r=n;if(a!==r){var c=A.current.getBoundingClientRect(),o=(c.bottom-c.top)/2,s=t.getClientOffset().y-c.top;a<r&&s<o||a>r&&s>o||(d(a,r),e.index=r)}}},drop:function(){m()}}),M=Object(i.a)(R,2)[1],D=Object(X.a)({item:Object(s.a)({},a,{type:oe.a.CHECK_ITEM,index:n}),collect:function(e){return{opacity:e.isDragging()?0:1}}}),F=Object(i.a)(D,2),H=F[0].opacity;return(0,F[1])(M(A)),l.a.createElement(be,{style:{opacity:H},ref:A},v?l.a.createElement("form",{onSubmit:function(e){return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:e.preventDefault(),z(!0);try{Z(r,t.board.id,t.id,a.id,{text:I}),j(!1)}catch(e){g(e.message)}finally{z(!1)}case 3:case"end":return n.stop()}}))}},l.a.createElement(W.a,null,l.a.createElement(J.a,{value:I,onChange:function(e){return S(e.target.value)}}),l.a.createElement(_.a,{addonType:"append"},l.a.createElement(q.a,{color:"primary",disabled:P},P?"Wait":"Save"))),E&&l.a.createElement("div",{className:"alert alert-danger"},E)):l.a.createElement(l.a.Fragment,null,l.a.createElement(ae,{checked:a.checked,onChange:function(e){Z(r,t.board.id,t.id,a.id,{checked:e})}}),"\xa0",a.text,l.a.createElement("span",{className:"pull-right"},l.a.createElement(x.a,{className:"action",icon:y.f,onClick:function(){return j(!v)}}),"\xa0",l.a.createElement(x.a,{className:"action",icon:y.h,onClick:function(){!function(e,t,a,n){o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.awrap(Object(b.a)({method:"DELETE",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/tasks/").concat(a,"/check-items/").concat(n)}));case 2:case"end":return r.stop()}}))}(r,t.board.id,t.id,a.id)}}))))}var be=w.a.div(se()),me=a(424),fe=a(135);function pe(e,t,a){var n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.awrap(Object(b.a)({method:"GET",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/tasks/").concat(a,"/comments")}));case 2:return n=r.sent,r.abrupt("return",Object(m.a)(n.data));case 4:case"end":return r.stop()}}))}function ve(e,t,a,n){var r;return o.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,o.a.awrap(Object(b.a)({method:"POST",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/tasks/").concat(a,"/comments"),data:Object(m.b)(n,"comments")}));case 3:r=c.sent,c.next=9;break;case 6:throw c.prev=6,c.t0=c.catch(0),new Error(c.t0.response.data.errors[0].detail);case 9:return c.abrupt("return",Object(m.a)(r.data));case 10:case"end":return c.stop()}}),null,null,[[0,6]])}function je(e,t,a,n,r){var c;return o.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,o.a.awrap(Object(b.a)({method:"PATCH",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/tasks/").concat(a,"/comments/").concat(n),data:Object(m.b)(r,"comments")}));case 3:c=s.sent,s.next=9;break;case 6:throw s.prev=6,s.t0=s.catch(0),new Error(s.t0.response.data.errors[0].detail);case 9:return s.abrupt("return",Object(m.a)(c.data));case 10:case"end":return s.stop()}}),null,null,[[0,6]])}function Oe(e,t,a,n){var r,c,s;return o.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return r=n?Object(b.b)(n):null,c=r?"?"+r:"",i.next=4,o.a.awrap(Object(b.a)({method:"GET",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/tasks/").concat(a,"/task-activities")+c}));case 4:return s=i.sent,i.abrupt("return",Object(m.a)(s.data));case 6:case"end":return i.stop()}}))}var he=a(550),Ee=a.n(he),ge=a(431),ke=a(604),xe=a(620);function ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"MMM',' d yyyy 'at' HH:mm a";if(!e)return"";e instanceof Date||(e=Object(ge.default)(e));var a=Intl.DateTimeFormat().resolvedOptions().timeZone;return e=Object(ke.a)(e,a),Object(xe.a)(e,t)}function we(){var e=Object(n.a)(["\n  .date {\n    color: #666;\n    font-size: 0.8em;\n  }\n\n  .actions {\n    .action-link {\n      cursor: pointer;\n      color: #666;\n      font-size: 0.8em;\n\n      &:hover {\n        text-decoration: underline;\n      }\n    }\n  }\n"]);return we=function(){return e},e}function Ce(e){var t=e.task,a=Object(u.useState)(""),n=Object(i.a)(a,2),r=n[0],c=n[1],d=Object(u.useState)(!1),b=Object(i.a)(d,2),m=b[0],f=b[1],p=Object(u.useState)(!1),v=Object(i.a)(p,2),j=v[0],O=v[1],E=Object(u.useState)(null),g=Object(i.a)(E,2),w=g[0],C=g[1],I=Object(k.i)().projectId,S=r||m,N=Object(u.useState)({comments:[],histories:[]}),T=Object(i.a)(N,2),P=T[0],z=P.comments,A=P.histories,M=T[1],F=Object(u.useContext)(R.a),H=Object(u.useCallback)((function(){var e,a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.a.awrap(pe(I,t.board.id,t.id));case 2:return e=n.sent,n.next=5,o.a.awrap(Oe(I,t.board.id,t.id,{include:"user"}));case 5:a=n.sent,M({comments:e,histories:a});case 7:case"end":return n.stop()}}))}),[I,t.board.id,t.id]),K=Object(u.useCallback)(h()(H,500),[H]);Object(u.useEffect)((function(){var e=F.ws.onPattern("task-".concat(t.id,"/comment-*"),(function(){K()})),a=F.ws.onPattern("task-".concat(t.id,"/activity"),(function(){K()}));return function(){e(),a()}}),[F.ws,K,t.id]),Object(u.useEffect)((function(){H()}),[H]);var L=Object(u.useMemo)((function(){var e=[],t=!0,a=!1,n=void 0;try{for(var r,c=z[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var o=r.value;e.push(Object(s.a)({activityType:"comment"},o))}}catch(f){a=!0,n=f}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}var i=!0,u=!1,l=void 0;try{for(var d,b=A[Symbol.iterator]();!(i=(d=b.next()).done);i=!0){var m=d.value;e.push(Object(s.a)({activityType:"history"},m))}}catch(f){u=!0,l=f}finally{try{i||null==b.return||b.return()}finally{if(u)throw l}}return Ee()(e,(function(e){return e.createdAt?Object(ge.default)(e.createdAt):e.date?Object(ge.default)(e.date):void 0})).reverse()}),[z,A]);return l.a.createElement("div",null,l.a.createElement("h6",{className:"mt-3"},l.a.createElement(x.a,{icon:y.e})," Activity"),l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-1"},l.a.createElement(me.a,{size:"120%"})),l.a.createElement("div",{className:"col-md-11"},l.a.createElement(D,{onFocus:function(){f(!0)},onBlur:function(){f(!1)},value:r,onChange:c}),S&&l.a.createElement("button",{type:"button",disabled:j,className:"btn btn-primary btn-sm",onClick:function(e){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.prev=1,e.next=4,o.a.awrap(ve(I,t.board.id,t.id,{text:r}));case 4:c(""),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),C(e.t0.message);case 10:return e.prev=10,O(!1),e.finish(10);case 13:case"end":return e.stop()}}),null,null,[[1,7,10,13]])}},"Save"),w&&l.a.createElement("div",{className:"alert alert-danger"},w))),l.a.createElement("div",null,L.map((function(e,a){return l.a.createElement(Ie,{activity:e,task:t,key:a})}))))}function Ie(e){return"history"===e.activity.activityType?l.a.createElement(Ne,e):l.a.createElement(Se,e)}function Se(e){var t=e.activity,a=e.task,n=Object(k.i)().projectId,r=Object(u.useContext)(fe.a).userId,c=Object(u.useState)(!1),s=Object(i.a)(c,2),d=s[0],m=s[1],f=Object(u.useState)(t.text),p=Object(i.a)(f,2),v=p[0],j=p[1],O=Object(u.useState)(null),h=Object(i.a)(O,2),E=h[0],g=h[1],w=Object(u.useState)(!1),C=Object(i.a)(w,2),I=C[0],S=C[1];return Object(u.useEffect)((function(){j(t.text)}),[t.text]),l.a.createElement(Te,{className:"row"},l.a.createElement("div",{className:"col-md-1"},l.a.createElement(me.a,{size:"120%"})),l.a.createElement("div",{className:"col-md-11"},d?l.a.createElement(l.a.Fragment,null,l.a.createElement(D,{value:v,onChange:j}),l.a.createElement("button",{type:"button",disabled:I,className:"btn btn-primary btn-sm",onClick:function(e){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,o.a.awrap(je(n,a.board.id,a.id,t.id,{text:v}));case 4:m(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),g(e.t0.message);case 10:return e.prev=10,S(!1),e.finish(10);case 13:case"end":return e.stop()}}),null,null,[[1,7,10,13]])}},"Save"),E&&l.a.createElement("div",{className:"alert alert-danger"},E)):l.a.createElement("div",null,l.a.createElement(B,{value:v})),l.a.createElement("div",{className:"date"},ye(t.createdAt)),r===t.user.id&&l.a.createElement("div",{className:"actions"},l.a.createElement("span",{className:"action-link",onClick:function(){return m(!0)}},l.a.createElement(x.a,{icon:y.f})," Edit"),"\xa0",l.a.createElement("span",{className:"action-link",onClick:function(){!function(e,t,a,n){o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.awrap(Object(b.a)({method:"DELETE",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/tasks/").concat(a,"/comments/").concat(n)}));case 2:case"end":return r.stop()}}))}(n,a.board.id,a.id,t.id)}},l.a.createElement(x.a,{icon:y.h})," Remove"))))}function Ne(e){var t=e.activity,a=(e.task,null);return"history"!==t.activityType||(a=function(e){var t=e.user.firstName;if("created"===e.type)return"".concat(t," created the task");if("updated"===e.type){if(e.data.updated.storyPoints)return"".concat(t," changed the story points to ").concat(e.data.updated.storyPoints);if(e.data.updated.name)return"".concat(t," changed the task name to ").concat(e.data.updated.name)}if("check-list-update"===e.type){var a=e.data.before,n=e.data.after;if(!a.checked&&n.checked)return"".concat(t," checked the item ").concat(n.text);if(a.checked&&!n.checked)return"".concat(t," unchecked the item ").concat(n.text)}}(t))?l.a.createElement(Te,{className:"row"},l.a.createElement("div",{className:"col-md-1"},l.a.createElement(me.a,{size:"120%"})),l.a.createElement("div",{className:"col-md-11"},l.a.createElement("div",null,l.a.createElement("span",null,a)),l.a.createElement("div",{className:"date"},ye(t.date)))):l.a.createElement(l.a.Fragment,null)}var Te=w.a.div(we());function Pe(){var e=Object(n.a)(["\n  background-color: #eee !important;\n  padding: 0.5em;\n\n  .option-field-label {\n    font-weight: bold;\n    font-size: 0.7em;\n  }\n\n  select {\n    margin-top: 0.3em;\n    padding: 0.5em;\n    background-color: white !important;\n    border: none !important;\n    border-radius: 0 !important;\n    width: 100%;\n  }\n"]);return Pe=function(){return e},e}function ze(){var e=Object(n.a)(["\n  .btn:first-child {\n    margin-top: 0;\n  }\n\n  .action-btn {\n    width: 100%;\n  }\n"]);return ze=function(){return e},e}function Ae(e){var t=Object(u.useState)(!1),a=Object(i.a)(t,2),n=a[0],r=a[1],c=Object(u.useState)(null),s=Object(i.a)(c,2),d=s[0],b=s[1],m=Object(u.useState)(!1),f=Object(i.a)(m,2),p=f[0],v=f[1],j=Object(u.useState)(!1),O=Object(i.a)(j,2),h=O[0],x=O[1],y=Object(k.i)(),w=Object(u.useContext)(R.a),C=Object(u.useCallback)((function(){var t;return o.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,o.a.awrap(Object(E.d)(y.projectId,e.boardId,y.taskId,{include:"board"}));case 3:t=a.sent,a.next=9;break;case 6:a.prev=6,a.t0=a.catch(0),a.t0.response&&404===a.t0.response.status&&(t=null);case 9:b(t);case 10:case"end":return a.stop()}}),null,null,[[0,6]])}),[y.projectId,y.taskId,e.boardId]);Object(u.useEffect)((function(){r(!0),o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.awrap(C());case 2:r(!1);case 3:case"end":return e.stop()}}))}),[y.projectId,y.taskId,e.boardId,C]),Object(u.useEffect)((function(){if(d)return w.ws.join("task-".concat(d.id)),function(){w.ws.leave("task-".concat(d.id))}}),[w.ws,d]),Object(u.useEffect)((function(){if(d){var e=w.ws.onPattern("task-".concat(d.id,"/task-*"),(function(){C()}));return function(){e()}}}),[w.ws,C,d]);var I=Object(u.useCallback)((function(t){Object(E.c)(y.projectId,e.boardId,y.taskId,{name:t})}),[y.projectId,y.taskId,e.boardId]),N=Object(u.useCallback)((function(t){Object(E.c)(y.projectId,e.boardId,y.taskId,{storyPoints:t?parseInt(t):null})}),[y.projectId,y.taskId,e.boardId]);return null===d?n?l.a.createElement(P.a,{isOpen:e.isOpen,toggle:e.toggle,size:"xl"},l.a.createElement(z.a,{toggle:e.toggle},"Loading task"),l.a.createElement(A.a,null,l.a.createElement(g.a,null))):l.a.createElement(P.a,{isOpen:e.isOpen,toggle:e.toggle,size:"xl"},l.a.createElement(z.a,{toggle:e.toggle},"Task not found"),l.a.createElement(A.a,null,"The requested task was not found in this board")):l.a.createElement(P.a,{isOpen:e.isOpen,toggle:e.toggle,size:"xl"},l.a.createElement(z.a,{toggle:e.toggle},l.a.createElement(S,{text:d.name,onChange:I})),l.a.createElement(A.a,null,l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-9"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-md-2"},l.a.createElement(Me,null,l.a.createElement("div",{className:"option-field-label"},"Story Points"),l.a.createElement("select",{value:d.storyPoints||"",onChange:function(e){return N(e.target.value)}},l.a.createElement("option",{value:""}),l.a.createElement("option",{value:"1"},"1"),l.a.createElement("option",{value:"2"},"2"),l.a.createElement("option",{value:"3"},"3"),l.a.createElement("option",{value:"5"},"5"),l.a.createElement("option",{value:"8"},"8"),l.a.createElement("option",{value:"13"},"13"),l.a.createElement("option",{value:"20"},"20"),l.a.createElement("option",{value:"40"},"40"),l.a.createElement("option",{value:"100"},"100"))))),l.a.createElement(U,{task:d}),l.a.createElement(ue,{task:d}),l.a.createElement(Ce,{task:d})),l.a.createElement(Re,{className:"col-md-3"},l.a.createElement("div",{className:"action-btn btn btn-danger",onClick:function(){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return v(!0),t.next=3,o.a.awrap(Object(E.b)(y.projectId,e.boardId,y.taskId));case 3:e.toggle();case 4:case"end":return t.stop()}}))},disabled:p},p?"Removing":"Remove"),l.a.createElement("div",{className:"action-btn btn btn-info",onClick:function(){return o.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(x(!0),"sprint"!==d.board.type){t.next=6;break}return t.next=4,o.a.awrap(Object(E.f)(y.projectId,e.boardId,y.taskId));case 4:t.next=8;break;case 6:return t.next=8,o.a.awrap(Object(E.g)(y.projectId,e.boardId,y.taskId));case 8:e.toggle();case 9:case"end":return t.stop()}}))},disabled:h},"sprint"===d.board.type?"Move to backlog":"Move to sprint")))))}var Re=w.a.div(ze()),Me=w.a.div(Pe()),De=a(607),Fe=Object(u.createContext)(null);function He(e){var t=e.columnId,a=Object(u.useState)(""),n=Object(i.a)(a,2),r=n[0],c=n[1],d=Object(u.useState)(null),f=Object(i.a)(d,2),j=f[0],O=f[1],h=Object(u.useState)({}),E=Object(i.a)(h,2),k=E[0],x=E[1],y=Object(u.useState)(!1),w=Object(i.a)(y,2),C=w[0],I=w[1],S=Object(u.useContext)(Fe),N=S.boardId,T=S.projectId;function R(){c(""),O(null),e.toggle()}return!t||k.id||C||(I(!0),function(e,t,a){var n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,o.a.awrap(Object(b.a)({method:"GET",url:"/dashboard/projects/".concat(e,"/boards/").concat(t,"/columns/").concat(a)}));case 2:return n=r.sent,r.abrupt("return",Object(m.a)(n.data));case 4:case"end":return r.stop()}}))}(T,N,t).then((function(e){x(e),c(e.name),I(!1)}))),l.a.createElement(P.a,{isOpen:e.isOpen,toggle:R},l.a.createElement(z.a,{toggle:R},t?"Edit column":"Create column"),l.a.createElement(A.a,null,C?l.a.createElement(g.a,null):l.a.createElement("div",{className:"form-group"},l.a.createElement("label",null,"Name"),l.a.createElement("input",{type:"text",className:"form-control",value:r,onChange:function(e){return c(e.target.value)}})),j&&l.a.createElement("div",{className:"alert alert-danger"},j)),l.a.createElement(De.a,null,!C&&l.a.createElement("button",{className:"btn btn-primary btn-round",onClick:function(){var a;return o.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a=Object(s.a)({},k,{name:r}),!t){n.next=7;break}return n.next=5,o.a.awrap(v(T,N,t,a));case 5:n.next=11;break;case 7:return a.order=e.nextColumnOrder,a.type="other",n.next=11,o.a.awrap(p(T,N,a));case 11:"onSave"in e&&e.onSave(),R(),n.next=18;break;case 15:n.prev=15,n.t0=n.catch(0),O(n.t0.message);case 18:case"end":return n.stop()}}),null,null,[[0,15]])}},t?"Edit":"Create")))}function Ke(e){return l.a.createElement(P.a,{isOpen:e.isOpen,toggle:e.toggle},l.a.createElement(z.a,{toggle:e.toggle},"Attention"),l.a.createElement(A.a,null,l.a.createElement("div",{class:"alert alert-warning"},e.message)),l.a.createElement(De.a,null,l.a.createElement("button",{className:"btn btn-primary btn-round",onClick:e.onConfirm},"Yes"),"\xa0",l.a.createElement("button",{className:"btn btn-danger btn-round",onClick:e.toggle},"No")))}function Le(e){var t=e.columnId,a=e.lastTaskOrder,n=Object(u.useState)(""),r=Object(i.a)(n,2),c=r[0],s=r[1],d=Object(u.useState)(!1),b=Object(i.a)(d,2),m=b[0],f=b[1],p=Object(u.useState)(null),v=Object(i.a)(p,2),j=v[0],O=v[1],h=Object(u.useContext)(Fe),g=h.boardId,k=h.projectId;return l.a.createElement("form",{onSubmit:function(e){var n;return o.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e.preventDefault(),f(!0),O(null),r.prev=3,n={name:c,column:t,order:a+1},r.next=7,o.a.awrap(Object(E.a)(k,g,n));case 7:s(""),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(3),O(r.t0.message);case 13:return r.prev=13,f(!1),r.finish(13);case 16:case"end":return r.stop()}}),null,null,[[3,10,13,16]])}},l.a.createElement(W.a,null,l.a.createElement(J.a,{value:c,onChange:function(e){return s(e.target.value)}}),l.a.createElement(_.a,{addonType:"append"},l.a.createElement(q.a,{color:"primary",disabled:m},m?"Wait":"Add"))),j&&l.a.createElement("div",{className:"alert alert-danger"},j))}function Be(){var e=Object(n.a)(["\n  cursor: pointer;\n"]);return Be=function(){return e},e}function Ge(e){var t=e.task,a=e.columnId,n=e.index,r=Object(u.useContext)(Fe),c=r.projectId,o=r.moveTask,d=r.updateTaskOrders,b=Object(u.useRef)(null),m=Object(k.h)(),f=Object(k.g)(),p="/dashboard/projects/".concat(c,"/backlog/tasks/").concat(t.id);if(/sprints/.test(m.pathname)){var v=m.pathname.match(/sprints\/([^/]+)/);p="/dashboard/projects/".concat(c,"/sprints/").concat(v[1],"/tasks/").concat(t.id)}var j=Object(u.useCallback)((function(){f.push(p)}),[f,p]),O=Object(Q.a)({accept:oe.a.TASK,hover:function(e,t){if(b.current){var r=e.index,c=n,s=e.columnId,i=a;if(r!==c||s!==i){var u=b.current.getBoundingClientRect(),l=(u.bottom-u.top)/2,d=t.getClientOffset().y-u.top;s===i&&r<c&&d<l||s===i&&r>c&&d>l||(o(s,r,i,c),e.index=c,e.columnId=i)}}},drop:function(){d()}}),h=Object(i.a)(O,2)[1],E=Object(X.a)({item:Object(s.a)({},t,{type:oe.a.TASK,columnId:a,index:n}),collect:function(e){return{opacity:e.isDragging()?0:1}}}),g=Object(i.a)(E,2),x=g[0].opacity;return(0,g[1])(h(b)),l.a.createElement(Ue,{className:"card",ref:b,style:{opacity:x},onClick:j},l.a.createElement("div",{className:"card-body"},t.name,t.storyPoints?l.a.createElement("span",{className:"badge badge-info pull-right"},t.storyPoints):null))}var Ue=w.a.div(Be());function $e(){var e=Object(n.a)(["\n"]);return $e=function(){return e},e}function We(){var e=Object(n.a)(["\n  position: absolute;\n  right: 6px;\n  top: 0;\n\n  .btn {\n    margin-top: 0.5em !important;\n    margin-left: 0.5em;\n  }\n"]);return We=function(){return e},e}function Je(){var e=Object(n.a)(["\n  font-size: 1em;\n  font-weight: bold;\n  text-transform: uppercase;\n  padding: 0.55em 1em;\n  background: linear-gradient(145deg, rgba(61,42,178,1) 0%, rgba(92,57,186,1) 45%, rgba(183,100,211,1) 100%) !important;\n  color: white !important;\n  position: relative;\n\n  .badge-story-points {\n    font-size: 1.2em;\n    margin: 0.35em 0 0 0.5em;\n  }\n"]);return Je=function(){return e},e}function _e(){var e=Object(n.a)(["\n  border-right: 1px dashed #ccc;\n  min-height: calc(100vh - 130px);\n\n  &.is-dragging {\n    opacity: 0;\n  }\n"]);return _e=function(){return e},e}function qe(e){var t=e.tasks,a=e.column,n=e.index,r=Object(u.useState)(!1),c=Object(i.a)(r,2),s=c[0],d=c[1],b=Object(u.useState)(!1),m=Object(i.a)(b,2),f=m[0],p=m[1],v=Object(u.useMemo)((function(){return t.reduce((function(e,t){return e+(t.storyPoints||0)}),0)}),[t]),O=Object(u.useContext)(Fe),h=O.boardId,E=O.projectId,g=O.moveColumn,k=O.moveTask,w=O.updateColumnOrders,C=O.updateTaskOrders,I=O.refreshColumns,S=function(){return d(!s)},N=function(){return p(!f)},T=Object(u.useRef)(null),P=Object(Q.a)({accept:[oe.a.COLUMN,oe.a.TASK],hover:function(e,r){if(e.type===oe.a.COLUMN){if(!T.current)return;var c=e.index,o=n;if(c===o)return;var s=T.current.getBoundingClientRect(),i=(s.right-s.left)/2,u=r.getClientOffset().x-s.left;if(c<o&&u<i)return;if(c>o&&u>i)return;g(c,o),e.index=o}else e.type===oe.a.TASK&&e.columnId!==a.id&&(k(e.columnId,e.index,a.id,t.length),e.columnId=a.id,e.index=t.length)},drop:function(e,t){e.type===oe.a.COLUMN?w():e.type===oe.a.TASK&&C()}}),z=Object(i.a)(P,2)[1],A=Object(X.a)({item:{type:oe.a.COLUMN,id:a.id,index:n},collect:function(e){return{isDragging:e.isDragging()}}}),R=Object(i.a)(A,3),M=R[0].isDragging,D=R[1],F=R[2];var H=["col-md-3"];M&&H.push("is-dragging"),F(z(T));var K=t.reduce((function(e,t){return t.order>e?t.order:e}),-1);return l.a.createElement(Ve,{className:H.join(" "),ref:T},l.a.createElement(Ye,{className:"card",ref:D},a.name,l.a.createElement(Ze,null,v>0?l.a.createElement("span",{className:"badge badge-info badge-story-points pull-right"},v):null,"other"===a.type&&l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:S},l.a.createElement(x.a,{icon:y.c})),s&&l.a.createElement(He,{isOpen:s,toggle:S,projectId:E,boardId:h,columnId:a.id,onSave:I}),l.a.createElement("button",{className:"btn btn-danger btn-sm",onClick:N},l.a.createElement(x.a,{icon:y.i})),l.a.createElement(Ke,{isOpen:f,toggle:N,message:"Are you sure you want to remove this column",onConfirm:function(){return o.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return N(),e.next=3,o.a.awrap(j(E,h,a.id));case 3:I();case 4:case"end":return e.stop()}}))}})))),l.a.createElement(Qe,null,t.map((function(e,t){return l.a.createElement(Ge,{key:e.id,index:t,columnId:a.id,task:e})})),l.a.createElement(Le,{columnId:a.id,lastTaskOrder:K})))}var Ve=w.a.div(_e()),Ye=w.a.div(Je()),Ze=w.a.div(We()),Qe=w.a.div($e());function Xe(){var e=Object(n.a)(["\n  margin-top: 0 !important;\n"]);return Xe=function(){return e},e}a.d(t,"a",(function(){return tt}));var et={fields:{tasks:"name,order,storyPoints,column,board"}};function tt(e){var t=e.board,a=Object(d.a)(),n=Object(u.useState)({booting:!0}),c=Object(i.a)(n,2),b=c[0],m=c[1],p=b.booting,j=b.tasks,O=b.columns,x=Object(u.useCallback)((function(e){m(Object(s.a)({},b,{columns:e}))}),[b]),y=Object(u.useCallback)((function(e){m(Object(s.a)({},b,{tasks:e}))}),[b]),w=Object(u.useState)(!1),C=Object(i.a)(w,2),I=C[0],S=C[1],N=Object(u.useState)({}),T=Object(i.a)(N,2),P=T[0],z=T[1],A=Object(u.useContext)(R.a),M=Object(k.g)(),D=Object(k.h)(),F=Object(u.useCallback)((function(){var e=D.pathname.replace(/\/tasks.+/,"");M.push(e)}),[M,D.pathname]);Object(u.useEffect)((function(){return A.ws.join("board-".concat(t.id)),function(){A.ws.leave("board-".concat(t.id))}}),[t.id,A.ws]);var H=function(){return S(!I)},K=Object(u.useCallback)(h()((function(){f(a,t.id).then(x)}),500),[a,t.id,x]),L=Object(u.useCallback)(h()((function(){Object(E.e)(a,t.id,et).then(y)}),500),[a,t.id,y]);Object(u.useEffect)((function(){var e=A.ws.onPattern("board-".concat(t.id,"/column-*"),(function(){K()})),a=A.ws.onPattern("board-".concat(t.id,"/task-*"),(function(){L()}));return function(){e(),a()}}),[a,t.id,A.ws,K,L]),Object(u.useEffect)((function(){var e={};if(!p){if(O){var t=!0,a=!1,n=void 0;try{for(var r,c=O[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var o=r.value;e[o.id]=j?at(j,o.id):[]}}catch(s){a=!0,n=s}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}}z(e)}}),[O,j,z,p]);var B=Object(u.useCallback)((function(e,t){var a=O[e];x(ce()(O,{$splice:[[e,1],[t,0,a]]}))}),[O,x]),G=Object(u.useCallback)(h()((function(){var e=[];for(var n in O){var r=O[n],c=parseInt(n);r.order!==c&&e.push({id:r.id,order:c})}e.length>0&&function(e){var n,r,c,s,i,u,l;o.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:for(n=[],r=!0,c=!1,s=void 0,d.prev=4,i=e[Symbol.iterator]();!(r=(u=i.next()).done);r=!0)l=u.value,n.push(v(a,t.id,l.id,{order:l.order}));d.next=12;break;case 8:d.prev=8,d.t0=d.catch(4),c=!0,s=d.t0;case 12:d.prev=12,d.prev=13,r||null==i.return||i.return();case 15:if(d.prev=15,!c){d.next=18;break}throw s;case 18:return d.finish(15);case 19:return d.finish(12);case 20:return d.next=22,o.a.awrap(Promise.all(n));case 22:f(a,t.id).then(x);case 23:case"end":return d.stop()}}),null,null,[[4,8,12,20],[13,,15,19]])}(e)}),500),[t.id,O,a]),U=Object(u.useCallback)(h()((function(){var e=[];for(var n in P)for(var r in P[n]){var c=P[n][r],s=parseInt(r);if(c.order!==s||c.column.id!==n){var i={id:c.id};c.order!==s&&(i.order=s),c.column.id!==n&&(i.column=n),e.push(i)}}e.length>0&&function(){var n,r,c,s,i,u,l;o.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:for(n=[],r=!0,c=!1,s=void 0,d.prev=4,i=e[Symbol.iterator]();!(r=(u=i.next()).done);r=!0)l=u.value,n.push(Object(E.c)(a,t.id,l.id,l));d.next=12;break;case 8:d.prev=8,d.t0=d.catch(4),c=!0,s=d.t0;case 12:d.prev=12,d.prev=13,r||null==i.return||i.return();case 15:if(d.prev=15,!c){d.next=18;break}throw s;case 18:return d.finish(15);case 19:return d.finish(12);case 20:return d.next=22,o.a.awrap(Promise.all(n));case 22:case"end":return d.stop()}}),null,null,[[4,8,12,20],[13,,15,19]])}()}),500),[P]),$=Object(u.useCallback)((function(e,t,a,n){var c=P[e][t];z(ce()(ce()(P,Object(r.a)({},e,{$splice:[[t,1]]})),Object(r.a)({},a,{$splice:[[n,0,c]]})))}),[P]);if(Object(u.useEffect)((function(){p&&function(){var e,n,r,c;return o.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,o.a.awrap(Promise.all([f(a,t.id),Object(E.e)(a,t.id,et)]));case 2:return e=u.sent,n=Object(i.a)(e,2),r=n[0],c=n[1],u.abrupt("return",Object(s.a)({},b,{columns:r,tasks:c,booting:!1}));case 7:case"end":return u.stop()}}))}().then(m)}),[t.id,b,p,a]),p)return l.a.createElement(g.a,null);var W=null,J=!0,_=!1,q=void 0;try{for(var V,Y=O[Symbol.iterator]();!(J=(V=Y.next()).done);J=!0){var Z=V.value;(null===W||Z.order>W)&&(W=Z.order)}}catch(X){_=!0,q=X}finally{try{J||null==Y.return||Y.return()}finally{if(_)throw q}}var Q=W+1;return l.a.createElement(Fe.Provider,{value:{projectId:a,boardId:t.id,moveColumn:B,updateColumnOrders:G,updateTaskOrders:U,refreshColumns:K,moveTask:$}},l.a.createElement("div",{className:"row"},O.map((function(e,t){return l.a.createElement(qe,{key:e.id,column:e,tasks:P[e.id]||[],index:t})})),l.a.createElement("div",{className:"col-md-3"},l.a.createElement(nt,{className:"btn btn-primary btn-round",onClick:H},"+ Add Column"))),l.a.createElement(He,{isOpen:I,toggle:H,nextColumnOrder:Q,onSave:K}),l.a.createElement(k.d,null,l.a.createElement(k.b,{path:"/dashboard/projects/:projectId/(backlog|sprints/current)/tasks/:taskId"},l.a.createElement(Ae,{isOpen:!0,boardId:t.id,toggle:F})),l.a.createElement(k.b,{path:"/dashboard/projects/:projectId/sprints/:sprintId/tasks/:taskId"},l.a.createElement(Ae,{isOpen:!0,boardId:t.id,toggle:F}))))}function at(e,t){return e.filter((function(e){return e.column.id===t}))}var nt=w.a.button(Xe())}}]);
//# sourceMappingURL=3.441f9117.chunk.js.map